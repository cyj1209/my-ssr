# 题目一 ：匹配到多个路由的时候如果出现报错，应该如何处理

## 1 只要有报错就不显示页面

    代码就是老师的直接用promise.all来发起请求，用catch来捕获。

## 2 如果单个路由出问题了就不显示出问题的路由，没有报错的路由正常显示。

### 思路

1.  server 端 用一个 promise 在包装一下组件的 loadData 有错误的话返回错误标志 ERROR 并且记录错误的 route 的 key， 没有的话返回正确标志 SUCCESS。
    然后在用 Promise.all 监听所有的请求。
    如果返回结果中没有 SUCCESS 标志，证明这次请求没有一次成功，则直接返货 500 错误。
    如果返回的请求中有 SUCCESS 则渲染页面，但是在 route.map 的时候只渲染没有出错的路由。并且将错误的 key 传递给 client 端。
    [服务端代码](./server/index.js)
2.  client 端 route 渲染的时候不渲染服务端以及出错的路由
    [client 端代码](./client/index.js)
    还需要考虑如果是客户端跳转到路由的时候这个时候请求报错应该怎么样同步的不显示报错的组件
    暂时的解决方案, 在 reduce 中增加 isError 字段，如果请求报错直接设置 isError 为 true
    [reduce 中的代码](./src/store/user.js)

### 优化方向，遗留问题

1. 优化反向，是否可以将 store 中的设置 isError 的逻辑抽离成一个中间件。
2. 问题，如何捕获底部中间件的错误，可以参考 koa 洋葱模型的 await，redux 是否支持异步错误的捕获。
3. 如何判断我整个页面显示的路由都报错了？ 或者退一步说，如何设定 mainRoute(主路由)，主路由报错，直接显示错误页面，非主路由报错隐藏掉错误路由的模块。

# 题目二 ：如何让 server 代理所有的请求。
